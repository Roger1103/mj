(function($){window.gaObj={};function gaKeyWord(type){var kw=$("#_condition").val(),page=getQueryString("page"),searchCat="搜索结果页";if(typeof type!="undefined"){searchCat="搜索无数据"}if(kw!=""&&!page){ga("set","dimension2",kw);ga("send",{hitType:"pageview",eventCategory:"搜索页",page:"/search_results.htm?c="+searchCat+"&q="+kw})}}function onProductShow(par){for(var i=0;i<par.length;i++){var product=par[i];ga("ec:addImpression",product);ga("set","dimension1",product.dimension1)}ga("send","pageview")}function onProductDetail(par,url){ga("ec:addProduct",par);ga("ec:setAction","click",{list:"Search Results"});ga("send","event","衡量产品点击","点击产品型号或图片","搜索结果页",{hitCallback:function(){if(url){document.location=url}}})}function addToCart(par,prod){ga("ec:addImpression",par);ga("ec:addProduct",prod);ga("ec:setAction","detail");ga("send","pageview");return !ga.loaded}function productDetailShow(par){ga("ec:addProduct",par);ga("ec:setAction","detail");ga("send","pageview")}function onProductPromoClick(par,prom){ga("ec:addPromo",par);ga("ec:setAction","promo_click");ga("send","event","促销","点击促销商品",prom.activityName)}function delProductClick(par){for(var i=0;i<par.length;i++){ga("ec:addProduct",par[i])}ga("ec:setAction","remove");ga("send","event","购物车移除","从购物车移除商品","购物车页面")}function settleClick(par,option){for(var i=0;i<par.length;i++){ga("ec:addProduct",par[i]);ga("set","dimension3",par[i].dimension3)}ga("ec:setAction","checkout",{"step":1,"option":option});ga("send","event","衡量结算","点击提交订单按钮","结算页")}function refundClick(par,orderId){for(var i=0;i<par.length;i++){ga("ec:addProduct",par[i])}ga("ec:setAction","refund",{"id":orderId});ga("ec:setAction","checkout",{"step":3,"option":"退款"});ga("send","event","衡量退款","点击退款按钮","订单列表页")}function goTocheckout(prodList,orderInfo){for(var i=0;i<prodList.length;i++){ga("ec:addProduct",prodList[i])}ga("ec:setAction","checkout",{"step":2,"option":orderInfo.option});ga("send","event","衡量结账","点击支付按钮")}function purchaseClick(prodList,orderInfo){for(var i=0;i<prodList.length;i++){ga("ec:addProduct",prodList[i])}ga("ec:setAction","purchase",orderInfo);ga("send","pageview")}function onShippingComplete(cart,stepNumber,shippingOption){for(var i=0;i<cart.length;i++){var product=cart[i];ga("ec:addProduct",product)}ga("ec:setAction","checkout_option",{"step":stepNumber,"option":shippingOption});ga("send","event","Checkout","Option","shippingOption")}function addlistTocart(pro){ga("ec:addProduct",pro);ga("ec:setAction","add");ga("send","event","购物车","点击-加入购物车","详情页加入购物车")}function onClick(par,event){var tempObj={list:"no set page",cate:"衡量点击",action:"点击",label:"other"},gaObj,e;gaObj=par?$.extend({},tempObj,par):tempObj,e=typeof event!="undefined"?event:"click";ga("ec:setAction",e,{list:gaObj.list});ga("send","event",gaObj.cate,gaObj.action,gaObj.label)}function getPromoOpt(par){var opt={"id":"not set id","name":"not set name","creative":"","position":""};var option=typeof par!="undefined"?$.extend({},opt,par):opt;return option}function promoPre(par){var opt=typeof par!="undefined"?getPromoOpt(par):getPromoOpt();ga("ec:addPromo",opt);ga("send","pageview")}function promoEvent(par,enentArg){var opt=typeof par!="undefined"?getPromoOpt(par):getPromoOpt();ga("ec:addPromo",opt);onClick(enentArg,"promo_click")}window.gaObj={gaKeyWord:gaKeyWord,addToCart:addToCart,productDetailShow:productDetailShow,onProductShow:onProductShow,onProductDetail:onProductDetail,onProductPromoClick:onProductPromoClick,delProductClick:delProductClick,settleClick:settleClick,refundClick:refundClick,purchaseClick:purchaseClick,onShippingComplete:onShippingComplete,addlistTocart:addlistTocart,onClick:onClick,goTocheckout:goTocheckout,promoPre:promoPre,promoEvent:promoEvent}})(jQuery);